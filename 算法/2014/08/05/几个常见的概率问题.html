<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]-->

    <title>几个常见的概率问题</title>
    <meta name="description" content="">

    <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css">

  </head>
  <body>
    <aside id="sidebar">
      <nav id="tags">
        <a href="/index.html" id="avatar"></a>

        <ul id="tags__ul">
          <li id="js-label1" class="tags__li tags-btn active">所有文章 <span class="post_count"></span></li>
          <li id="js-label2" class="tags__li tags-btn">并发<span class="post_count"></span></li>
          <li id="js-label3" class="tags__li tags-btn">jvm<span class="post_count"></span></li>
          <li id="js-label4" class="tags__li tags-btn">算法<span class="post_count"></span></li>
          <li id="js-label5" class="tags__li tags-btn">数据库<span class="post_count"></span></li>
          <li id="js-label6" class="tags__li tags-btn">cache<span class="post_count"></span></li>
          <li id="js-label7" class="tags__li tags-btn">c和os<span class="post_count"></span></li>
          <li id="js-label8" class="tags__li tags-btn">网络<span class="post_count"></span></li>
          <li id="js-label9" class="tags__li tags-btn">工作<span class="post_count"></span></li>
        </ul>

        <div id="tags__bottom">
          <a href="mailto:novohust@163.com" id="icon-email" class="tags-btn fontello"></a>
          <a href="/rss.xml" id="icon-feed" class="tags-btn fontello"></a>
        </div>
      </nav> <!-- end #tags -->

      <div id="posts-list">
        <form action="" id="search-form">
          <a href="/index.html" id="mobile-avatar"></a>
          <!-- NOTE: input field is disabled by default -->
          <input id="search-input" type="text" placeholder="Search..." disabled >
        </form>

        <nav id="pl__container">
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/09/11/ThreadLocal%20%E5%88%86%E6%9E%90.html"><span class="pl__circle"></span><span class="pl__title">ThreadLocal 分析</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="工作 pl__all" href="/%E5%B7%A5%E4%BD%9C/2014/09/04/MapReduce%20Algorithms.html"><span class="pl__circle"></span><span class="pl__title">MapReduce Algorithms</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/09/03/%E9%AB%98%E6%80%A7%E8%83%BD%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF%E7%AC%94%E8%AE%B0.html"><span class="pl__circle"></span><span class="pl__title">高性能网络通讯笔记</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="工作 pl__all" href="/%E5%B7%A5%E4%BD%9C/2014/09/03/Skyline%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90.html"><span class="pl__circle"></span><span class="pl__title">Skyline监控系统工作原理分析</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="工作 pl__all" href="/%E5%B7%A5%E4%BD%9C/2014/09/03/Skyline%20timeseries%E5%BC%82%E5%B8%B8%E5%88%A4%E5%AE%9A%E7%AE%97%E6%B3%95.html"><span class="pl__circle"></span><span class="pl__title">Skyline timeseries异常判定算法</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/08/05/%E6%8E%92%E5%BA%8F%E6%80%BB%E7%BB%93.html"><span class="pl__circle"></span><span class="pl__title">排序总结</span><span class="pl__date">Aug 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/08/05/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F.html"><span class="pl__circle"></span><span class="pl__title">快速排序</span><span class="pl__date">Aug 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/08/05/%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E7%9A%84%E6%A6%82%E7%8E%87%E9%97%AE%E9%A2%98.html"><span class="pl__circle"></span><span class="pl__title">几个常见的概率问题</span><span class="pl__date">Aug 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/31/%E5%B8%B8%E8%A7%81%E7%9A%84HTTP%E7%8A%B6%E6%80%81%E7%A0%81.html"><span class="pl__circle"></span><span class="pl__title">常见的HTTP状态码</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/28/BloomFilter.html"><span class="pl__circle"></span><span class="pl__title">BloomFilter</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="jvm pl__all" href="/jvm/2014/07/27/gc.html"><span class="pl__circle"></span><span class="pl__title">JVM GC调优</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/%E9%AB%98%E6%80%A7%E8%83%BD%E7%BD%91%E7%BB%9C%E9%80%9A%E8%AE%AF%E7%AC%94%E8%AE%B0.html"><span class="pl__circle"></span><span class="pl__title">高性能网络通讯笔记</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E9%9D%9E%E9%80%92%E5%BD%92%E7%9A%84%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86.html"><span class="pl__circle"></span><span class="pl__title">二叉树的各种遍历</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/%E9%93%BE%E8%B7%AF%E5%B1%82%20%E7%BD%91%E7%BB%9C%E5%B1%82%20UDP%20IO%E6%A8%A1%E5%9E%8B.html"><span class="pl__circle"></span><span class="pl__title">链路层 网络层 UDP IO模型</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E8%B4%9D%E5%8F%B6%E6%96%AF.html"><span class="pl__circle"></span><span class="pl__title">贝叶斯</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98.html"><span class="pl__circle"></span><span class="pl__title">背包问题</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="c和os pl__all" href="/c%E5%92%8Cos/2014/07/26/%E7%BD%91%E5%8D%A1%E4%B8%AD%E6%96%AD%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.html"><span class="pl__circle"></span><span class="pl__title">网卡中断负载均衡</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E7%BA%BF%E6%AE%B5%E6%A0%91.html"><span class="pl__circle"></span><span class="pl__title">线段树</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E6%A1%B6%E6%8E%92%E5%BA%8F%E5%9C%A8%E6%8E%92%E8%A1%8C%E6%A6%9C%E9%97%AE%E9%A2%98%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8.html"><span class="pl__circle"></span><span class="pl__title">桶排序在排行榜问题中的应用</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E5%B9%B6%E6%9F%A5%E9%9B%86.html"><span class="pl__circle"></span><span class="pl__title">并查集</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/%E5%B9%B6%E5%8F%91%E9%9B%86%E5%90%88.html"><span class="pl__circle"></span><span class="pl__title">并发集合</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/%E5%AE%9A%E6%97%B6%E5%99%A8%EF%BC%88Timer%EF%BC%89%E7%9A%84%E5%AE%9E%E7%8E%B0.html"><span class="pl__circle"></span><span class="pl__title">定时器（Timer）的实现</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E5%A0%86.html"><span class="pl__circle"></span><span class="pl__title">堆</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E5%9B%9E%E6%BA%AF.html"><span class="pl__circle"></span><span class="pl__title">回溯</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%B4%A2%E5%BC%95%E6%A0%91(%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84).html"><span class="pl__circle"></span><span class="pl__title">二进制索引树(树状数组)</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/TCP.html"><span class="pl__circle"></span><span class="pl__title">TCP</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/RST%E5%8F%8Ajava%20socket%E5%85%B3%E9%97%AD%E5%90%8E%E8%AF%BB%E5%86%99%E7%9A%84%E5%90%84%E7%A7%8D%E5%BC%82%E5%B8%B8.html"><span class="pl__circle"></span><span class="pl__title">RST及java socket关闭后读写的各种异常</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/Netty3%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.html"><span class="pl__circle"></span><span class="pl__title">Netty3 源码分析</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="网络 pl__all" href="/%E7%BD%91%E7%BB%9C/2014/07/26/Netty3%204%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%AB.html"><span class="pl__circle"></span><span class="pl__title">Netty3 4线程模型的区别</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="数据库 pl__all" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2014/07/26/MySQL%E6%80%BB%E7%BB%93.html"><span class="pl__circle"></span><span class="pl__title">MySQL总结</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="c和os pl__all" href="/c%E5%92%8Cos/2014/07/26/Mode%20Switch%20%E5%92%8C%20Context%20Switch.html"><span class="pl__circle"></span><span class="pl__title">Mode Switch 和 Context Switch</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/Lock-Free%20%E7%AE%97%E6%B3%95.html"><span class="pl__circle"></span><span class="pl__title">Lock-Free 算法</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/LCA%20%E5%92%8C%20RMQ.html"><span class="pl__circle"></span><span class="pl__title">LCA 和 RMQ</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/KMP.html"><span class="pl__circle"></span><span class="pl__title">KMP</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.html"><span class="pl__circle"></span><span class="pl__title">Java内存模型</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/Java%20%E5%B9%B6%E5%8F%91%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86.html"><span class="pl__circle"></span><span class="pl__title">Java 并发基本知识</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="cache pl__all" href="/cache/2014/07/26/Http%E5%8D%8F%E8%AE%AE%E4%B8%AD%E7%9A%84cache%E6%9C%BA%E5%88%B6.html"><span class="pl__circle"></span><span class="pl__title">Http协议中的cache机制</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="算法 pl__all" href="/%E7%AE%97%E6%B3%95/2014/07/26/Hash%20&%20Rabin-Karp%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95.html"><span class="pl__circle"></span><span class="pl__title">Hash & Rabin-Karp字符串查找算法</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/Executor%20%E4%B9%8B%20%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%8F%8A%E5%AE%9A%E6%97%B6%E5%99%A8.html"><span class="pl__circle"></span><span class="pl__title">Executor 之 线程池及定时器</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="c和os pl__all" href="/c%E5%92%8Cos/2014/07/26/C%E6%80%BB%E7%BB%93%20+%20%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98.html"><span class="pl__circle"></span><span class="pl__title">C总结 + 虚拟内存</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="cache pl__all" href="/cache/2014/07/26/Cache%20%E7%9B%B8%E5%85%B3%E7%90%86%E8%AE%BA.html"><span class="pl__circle"></span><span class="pl__title">Cache 相关理论</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="c和os pl__all" href="/c%E5%92%8Cos/2014/07/26/CPU%20Cache%20%E4%B8%8E%20%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.html"><span class="pl__circle"></span><span class="pl__title">CPU Cache 与 存储器层次结构</span><span class="pl__date">Jul 2014</span></a>
        
          <a class="并发 pl__all" href="/%E5%B9%B6%E5%8F%91/2014/07/26/AQS%20%E5%92%8C%20%E9%AB%98%E7%BA%A7%E5%90%8C%E6%AD%A5%E5%99%A8.html"><span class="pl__circle"></span><span class="pl__title">AQS 和 高级同步器</span><span class="pl__date">Jul 2014</span></a>
        
        </nav>
      </div> <!-- end #posts-list -->
    </aside> <!-- end #sidebar -->

    <div id="post">
      <div id="pjax">
        <article id="post__content">
  <h1 id="post__title" data-identifier="20140805">几个常见的概率问题</h1>
  <div style="line-height: 1.6; font-family: Helvetica Neue, Arial, Hiragino Sans GB, STHeiti, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, Song, sans-serif;">
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">今天研究了下几个简单的概率问题，在这里记录下。</p>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">1. 洗牌</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">问题很简单，有 n 个元素，设计一个能保证随机性的洗牌算法。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">直觉想到的算法是：</p>
<blockquote style="padding: 15px 20px; margin: 0 0 15px 0; font-size: 14px; border-left: 5px solid #ddd; background-color: rgba(102, 128, 153, 0.05);">
<p style="margin: 0 0 10px; margin-bottom: 0; line-height: 1.6; font-size: 14px; font-weight: 300; white-space: pre-wrap; word-wrap: break-word;">用一个数组作为新牌堆，不停地从原数组剩下的元素中随机挑一个放入新牌堆，直到原牌堆耗尽。</p>
</blockquote><p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">我们来验证一下它的随机性。考虑一个元素，洗牌后它在第一个位置（即第一次抽牌就选中它）的概率是:</p>
<div style="margin: 20px 0; text-align: center;"><span></span><span style=""><div style="white-space: nowrap;"><span style="width: 1.301em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.977em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(0.652em 1000.003em 3.033em -0.376em); top: -2.162em; left: 0.003em;"><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.706em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.897em 1000.003em 2.654em -0.484em); top: -1.783em; left: 50%; margin-left: -0.268em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.706em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 2.861em; vertical-align: -0.996em;"></span></span></div></span></div>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">在第二个位置的概率是：</p>
<div style="margin: 20px 0; text-align: center;"><span></span><span style=""><div style="white-space: nowrap;"><span style="width: 21.864em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.561em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(-1.188em 1000.003em 5.035em -0.322em); top: -2.162em; left: 0.003em;"><span><span style="padding-right: 0.165em; padding-left: 0.165em;"><span style="display: inline-block; position: relative; width: 16.182em; height: 0px;"><span style="position: absolute; clip: rect(2.871em 1000.003em 8.282em -0.484em); top: -6.112em; left: 0.003em;"><span style="display: inline-block; position: relative; width: 0.814em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.654em -0.43em); top: -4.922em; right: 0.003em;"><span><span><span style="font-family:MathJax_Math, serif; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.111em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: -4.435em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: -1.999em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span></span><span style="display: inline-block; width: 0px; height: 6.117em;"></span></span><span style="position: absolute; clip: rect(2.871em 1000.003em 7.957em -0.43em); top: -5.787em; left: 1.788em;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px;"><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -5.084em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -3.082em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -0.647em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.793em;"></span></span><span style="position: absolute; clip: rect(3.574em 1000.003em 9.797em -0.43em); top: -6.924em; left: 3.574em;"><span style="display: inline-block; position: relative; width: 12.611em; height: 0px;"><span style="position: absolute; clip: rect(1.68em 1000.003em 3.087em -0.43em); top: -5.084em; left: 0.003em;"><span><span><span style="font-family:MathJax_Math, serif; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.111em;"></span></span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">第</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">一</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">次</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">没</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">抽</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">中</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="font-family:MathJax_Math, serif; font-style: italic; padding-left: 0.219em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.111em;"></span></span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">第</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">二</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">次</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">抽</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">中</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.139em 1000.003em 3.52em -0.376em); top: -3.082em; left: 0.003em;"><span><span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Main, serif;">1</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">−</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.706em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.897em 1000.003em 2.654em -0.484em); top: -1.783em; left: 50%; margin-left: -0.268em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.706em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 2.384em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.484em); top: -1.945em; left: 50%; margin-left: -1.134em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">−</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 2.384em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.492em 1000.003em 4.873em -0.376em); top: -1.999em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.706em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.897em 1000.003em 2.654em -0.484em); top: -1.783em; left: 50%; margin-left: -0.268em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.706em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span></span><span style="display: inline-block; width: 0px; height: 6.929em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 8.004em; vertical-align: -3.639em;"></span></span></div></span></div>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">依次类推，可知该元素将被等概率地分配到任意位置，符合要求。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">按该思路实现洗牌算法时有两个问题。首先，新牌堆显然需要 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 2.817em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.113em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.734em 1000.003em 3.087em -0.43em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">O</span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-family:MathJax_Main, serif;">)</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.432em; vertical-align: -0.425em;"></span></span></span></span></span> 的空间；其次，元素从旧数组移入新牌堆后势必会留下空洞，在后续抽牌时要跳过这些空洞位置。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">但实际上，新牌堆和旧牌堆元素之和始终为 n，因此整个洗牌过程可以就地完成。<strong style="font-weight: bold;">我们可以从前向后遍历，对元素 i，前 i-1 个位置构成新牌堆，i 及其后续元素属于旧牌堆。从旧牌堆中随机抽一个元素，与 i 处元素交换，即完成了一次抽牌动作</strong>：</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;"><img alt="Alt text" class="en-media" longdesc="./1407165876987.png" name="7181a84e-10b9-436c-a70f-45240438418a" src="/assets/img/1a87c760b2ed0738a84555935ac5928d.png" style="border: 0; max-width: 100%; border-radius: 8px;"/></p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">这个算法还有个名字，<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 0 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 8px; margin: 0 4px;">Fisher–Yates shuffle</code>。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">代码：</p>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap; background: transparent;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 8px; display: block; background: #23241f; margin: 0 4px;"><span style="color: #F92672;"><span style="color: #66d9ef;">function</span> <span style="color: #a6e22e;">shuffle</span><span style="color: #f8f8f2;">(array)</span> </span>{
  <span style="color: #F92672;">var</span> m = <span style="color: #F92672;">array</span>.length, i;

  <span style="color: #75715e;">// While there remain elements to shuffle…</span>
  <span style="color: #75715e;">// 为了方便这里是从后往前遍历的</span>
  <span style="color: #F92672;">while</span> (m) {

    <span style="color: #75715e;">// Pick a remaining element…</span>
    i = Math.floor(Math.random() * m--);

    <span style="color: #75715e;">// And swap it with the current element.</span>
    <span style="color: #F92672;">var</span> t = <span style="color: #F92672;">array</span>[m];
    <span style="color: #F92672;">array</span>[m] = <span style="color: #F92672;">array</span>[i];
    <span style="color: #F92672;">array</span>[i] = t;
  }

}
</code></pre>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">2. 随机数生成器的转换</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">听名字有点绕，其实就是给你一个<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 0 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 8px; margin: 0 4px;">Rand5()</code>，表示随机生成 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 2.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.059em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.734em 1000.003em 3.087em -0.376em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Main, serif;">[</span><span style="font-family:MathJax_Main, serif;">0</span><span style="font-family:MathJax_Main, serif;">,</span><span style="font-family:MathJax_Main, serif; padding-left: 0.165em;">5</span><span style="font-family:MathJax_Main, serif;">)</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.432em; vertical-align: -0.425em;"></span></span></span></span></span> 之间的数字，让你实现一个<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 0 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 8px; margin: 0 4px;">Rand3()</code>。</p>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap; background: transparent;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 8px; display: block; background: #23241f; margin: 0 4px;"><span style="color: #F92672;">int</span> Rand3()  
{  
    <span style="color: #F92672;">int</span> x = <span style="color: #ae81ff;">5</span>;  
    <span style="color: #F92672;">while</span>(x &gt;= <span style="color: #ae81ff;">3</span>) 
        x = Rand5();  
    <span style="color: #F92672;">return</span> x;  
}
</code></pre>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">逻辑很简单，用<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 0 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 8px; margin: 0 4px;">Rand5()</code>不停地产生随机数，直到某个数字落在了 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 2.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.059em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.734em 1000.003em 3.087em -0.376em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Main, serif;">[</span><span style="font-family:MathJax_Main, serif;">0</span><span style="font-family:MathJax_Main, serif;">,</span><span style="font-family:MathJax_Main, serif; padding-left: 0.165em;">3</span><span style="font-family:MathJax_Main, serif;">)</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.432em; vertical-align: -0.425em;"></span></span></span></span></span> 内。最终只会生成 0/1/2 三个数字，看起来似乎每个数字都是等概率的。下面来证明这个结论：</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">以输出0为例，看看概率是多少。第一次 Rand5 返回 0 的概率是1/5，如果返回3或4（2/5 的概率），则需要调用第二次，同样的，也是1/5的概率得到 0，2/5 的概率得到3或4导致循环继续执行下去，如此反复。因此输出 0 的概率为：</p>
<div style="margin: 20px 0; text-align: center;"><span></span><span style=""><div style="white-space: nowrap;"><span style="width: 26.951em; display: inline-block;"><span style="display: inline-block; position: relative; width: 20.403em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(-4.867em 1000.003em 8.715em -0.376em); top: -2.162em; left: 0.003em;"><span><span style="padding-right: 0.165em; padding-left: 0.165em;"><span style="display: inline-block; position: relative; width: 20.024em; height: 0px;"><span style="position: absolute; clip: rect(6.496em 1000.003em 18.401em -0.538em); top: -12.551em; left: 0.003em;"><span style="display: inline-block; position: relative; width: 0.49em; height: 0px;"><span style="position: absolute; clip: rect(1.897em 1000.003em 2.871em -0.538em); top: -7.952em; right: 0.003em;"><span><span><span style="font-family:MathJax_Math, serif; font-style: italic;">p</span></span></span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: -6.437em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: -3.785em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: -0.755em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: 1.68em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span></span><span style="display: inline-block; width: 0px; height: 12.557em;"></span></span><span style="position: absolute; clip: rect(6.496em 1000.003em 18.293em -0.43em); top: -12.443em; left: 1.464em;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px;"><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -8.114em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -5.084em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -2.432em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: 0.598em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: 3.033em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="display: inline-block; width: 0px; height: 12.449em;"></span></span><span style="position: absolute; clip: rect(7.254em 1000.003em 20.836em -0.376em); top: -14.283em; left: 3.249em;"><span style="display: inline-block; position: relative; width: 16.778em; height: 0px;"><span style="position: absolute; clip: rect(2.221em 1000.003em 4.981em -0.376em); top: -9.305em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">2</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="padding-left: 0.219em;"><span style="vertical-align: 0.003em;"><span style="font-family:MathJax_Size3, serif;">(</span></span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">2</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="padding-left: 0.219em;"><span style="vertical-align: 0.003em;"><span style="font-family:MathJax_Size3, serif;">(</span></span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">2</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="padding-left: 0.219em;"><span style=""><span style="font-family:MathJax_Main, serif;">(</span></span><span style="font-family:MathJax_Main, serif;">⋯</span><span style=""><span style="font-family:MathJax_Main, serif;">)</span></span></span><span style="vertical-align: 0.003em;"><span style="font-family:MathJax_Size3, serif;">)</span></span></span><span style="vertical-align: 0.003em;"><span style="font-family:MathJax_Size3, serif;">)</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.845em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 3.791em -0.376em); top: -5.084em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="padding-left: 0.219em;"><span style="display: inline-block; position: relative; width: 2.221em; height: 0px;"><span style="position: absolute; clip: rect(1.734em 1000.003em 3.087em -0.43em); top: -2.649em; left: 0.003em;"><span style="font-family:MathJax_Size1, serif; vertical-align: 0.003em;">∑</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.788em 1000.003em 2.438em -0.43em); top: -2.757em; left: 1.031em;"><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">∞</span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 2.438em -0.484em); top: -1.999em; left: 1.031em;"><span><span><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">i</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">=</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">0</span></span></span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span></span></span><span style="padding-left: 0.165em;"><span style="display: inline-block; position: relative; width: 2.546em; height: 0px;"><span style="position: absolute; clip: rect(2.221em 1000.003em 4.981em -0.268em); top: -3.839em; left: 0.003em;"><span><span style="vertical-align: 0.003em;"><span style="font-family:MathJax_Size3, serif;">(</span></span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">2</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="vertical-align: 0.003em;"><span style="font-family:MathJax_Size3, serif;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.845em;"></span></span><span style="position: absolute; top: -3.406em; left: 2.275em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.139em 1000.003em 4.061em -0.376em); top: -2.432em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 2.546em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 3.195em -0.376em); top: -1.783em; left: 50%; margin-left: -1.188em;"><span><span style="font-family:MathJax_Main, serif;">1</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">−</span><span style="padding-left: 0.327em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.49em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.438em -0.43em); top: -2.703em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">2</span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 2.438em -0.43em); top: -1.891em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.49em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 2.546em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.139em 1000.003em 3.52em -0.376em); top: 0.598em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">5</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">3</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.492em 1000.003em 4.873em -0.376em); top: 1.68em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.43em); top: -1.945em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">3</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span></span><span style="display: inline-block; width: 0px; height: 14.288em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 17.718em; vertical-align: -8.496em;"></span></span></div></span></div>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">显然这种方法是正确的。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">换一下题目，给一个<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 0 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 8px; margin: 0 4px;">Rand(3)</code>，怎么生成一个<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 0 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 8px; margin: 0 4px;">Rand(5)</code>呢？由于 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 13.423em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.176em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.734em 1000.003em 3.087em -0.43em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">R</span><span style="font-family:MathJax_Math, serif; font-style: italic;">a</span><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-family:MathJax_Math, serif; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="font-family:MathJax_Main, serif;">3</span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">3</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Math, serif; font-style: italic; padding-left: 0.219em;">R</span><span style="font-family:MathJax_Math, serif; font-style: italic;">a</span><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-family:MathJax_Math, serif; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="font-family:MathJax_Main, serif;">3</span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Main, serif;">)</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.432em; vertical-align: -0.425em;"></span></span></span></span></span> 可以构造出<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 0 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 8px; margin: 0 4px;">Rand(9)</code>，对它再应用上述算法即可。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">解释下 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 13.423em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.176em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.734em 1000.003em 3.087em -0.43em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">R</span><span style="font-family:MathJax_Math, serif; font-style: italic;">a</span><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-family:MathJax_Math, serif; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="font-family:MathJax_Main, serif;">3</span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">3</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Math, serif; font-style: italic; padding-left: 0.219em;">R</span><span style="font-family:MathJax_Math, serif; font-style: italic;">a</span><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-family:MathJax_Math, serif; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="font-family:MathJax_Main, serif;">3</span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Main, serif;">)</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.432em; vertical-align: -0.425em;"></span></span></span></span></span> 为什么可以得到<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 0 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 8px; margin: 0 4px;">Rand(9)</code>。<span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 7.091em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.36em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.734em 1000.003em 3.087em -0.43em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">R</span><span style="font-family:MathJax_Math, serif; font-style: italic;">a</span><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-family:MathJax_Math, serif; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="font-family:MathJax_Main, serif;">3</span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">3</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.432em; vertical-align: -0.425em;"></span></span></span></span></span> 得到一个随机数集合<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 0 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 8px; margin: 0 4px;">0,3,6</code>，<span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 4.873em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.682em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.734em 1000.003em 3.087em -0.43em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">R</span><span style="font-family:MathJax_Math, serif; font-style: italic;">a</span><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-family:MathJax_Math, serif; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="font-family:MathJax_Main, serif;">3</span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Main, serif;">)</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.432em; vertical-align: -0.425em;"></span></span></span></span></span> 得到<code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 90%; padding: 0 4px; color: #c7254e; background-color: #f9f2f4; white-space: nowrap; border-radius: 8px; margin: 0 4px;">0,1,2</code>，二者相加的结果刚好均匀地分布在 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 2.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.059em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.734em 1000.003em 3.087em -0.376em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Main, serif;">[</span><span style="font-family:MathJax_Main, serif;">0</span><span style="font-family:MathJax_Main, serif;">,</span><span style="font-family:MathJax_Main, serif; padding-left: 0.165em;">9</span><span style="font-family:MathJax_Main, serif;">)</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.432em; vertical-align: -0.425em;"></span></span></span></span></span> 区间内。推广这个结论可得，<span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 15.371em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.637em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.734em 1000.003em 3.087em -0.43em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">R</span><span style="font-family:MathJax_Math, serif; font-style: italic;">a</span><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-family:MathJax_Math, serif; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="font-family:MathJax_Math, serif; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.057em;"></span></span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="font-family:MathJax_Math, serif; font-style: italic; padding-left: 0.219em;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.057em;"></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Math, serif; font-style: italic; padding-left: 0.219em;">R</span><span style="font-family:MathJax_Math, serif; font-style: italic;">a</span><span style="font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-family:MathJax_Math, serif; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="font-family:MathJax_Math, serif; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.057em;"></span></span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Main, serif;">)</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.432em; vertical-align: -0.425em;"></span></span></span></span></span> 可以得到 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 4.223em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.195em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.626em 1000.003em 3.087em -0.376em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Main, serif;">[</span><span style="font-family:MathJax_Main, serif;">0</span><span style="font-family:MathJax_Main, serif;">,</span><span style="padding-left: 0.165em;"><span style="display: inline-block; position: relative; width: 1.572em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.654em -0.43em); top: -2.486em; left: 0.003em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.057em;"></span></span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; top: -2.703em; left: 1.085em;"><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">2</span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.646em; vertical-align: -0.425em;"></span></span></span></span></span> 区间内的随机数生成器。</p>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">3. 蓄水池抽样</h2>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">蓄水池抽样是要解决这样一个问题：给定一个很大的集合，集合总数 n 不能确定，只能遍历一遍，要求从中随机选取 k 个元素。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">蓄水池算法的原理是：维护一个大小为 k 的蓄水池，用集合的前 k 个元素初始化之；对后续每个元素 i，都以 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 1.031em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.085em 1000.003em 2.708em -0.376em); top: -2.162em; left: 0.003em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.49em; height: 0px;"><span style="position: absolute; clip: rect(1.572em 1000.003em 2.384em -0.43em); top: -2.649em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(1.572em 1000.003em 2.384em -0.484em); top: -1.837em; left: 50%; margin-left: -0.106em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.49em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.861em; vertical-align: -0.568em;"></span></span></span></span></span> 的概率替换掉蓄水池中的某个元素。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">代码：</p>
<pre style="overflow: initial; font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: 14px; display: block; padding: 0; margin: 0 0 10px; line-height: 1.6; word-break: break-all; word-wrap: break-word; color: #333333; background-color: #f5f5f5; border: none; border-radius: 0; white-space: pre-wrap; background: transparent;" xml:space="preserve"><code style="font-family: Menlo, Monaco, Consolas, Courier New, monospace; font-size: inherit; padding: 1em; color: #f8f8f2; background-color: transparent; white-space: pre-wrap; border-radius: 8px; display: block; background: #23241f; margin: 0 4px;">Init : a reservoir <span>with</span> the size： k  
<span style="color: #F92672;">for</span> i= k+<span style="color: #ae81ff;">1</span> to n  
   M=random(<span style="color: #ae81ff;">1</span>, i);  
   <span style="color: #F92672;">if</span>( M &lt; k)  
        SWAP the Mth value <span style="color: #F92672;">and</span> ith value  
end <span style="color: #F92672;">for</span>
</code></pre>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">下面来证明一下该算法的正确性。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">对某个元素，第一次就选中它的概率是 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 1.085em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.814em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.139em 1000.003em 2.708em -0.376em); top: -2.162em; left: 0.003em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.544em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.438em -0.43em); top: -2.703em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(1.734em 1000.003em 2.384em -0.484em); top: -1.891em; left: 50%; margin-left: -0.214em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.544em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.789em; vertical-align: -0.568em;"></span></span></span></span></span>，第二次才选中它的概率是 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 10.825em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.174em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.626em 1000.003em 3.195em -0.376em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Main, serif;">1</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">−</span><span style="padding-left: 0.327em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.544em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.438em -0.43em); top: -2.703em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(1.734em 1000.003em 2.384em -0.484em); top: -1.891em; left: 50%; margin-left: -0.214em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.544em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="padding-left: 0.327em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 1.464em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.438em -0.43em); top: -2.703em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 2.438em -0.484em); top: -1.891em; left: 50%; margin-left: -0.647em;"><span><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">−</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">1</span></span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 1.464em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.273em;">=</span><span style="padding-left: 0.381em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.544em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.438em -0.43em); top: -2.703em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(1.734em 1000.003em 2.384em -0.484em); top: -1.891em; left: 50%; margin-left: -0.214em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.544em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.861em; vertical-align: -0.568em;"></span></span></span></span></span>，第三次第四次也类似，这跟之前的洗牌场景很像。因此，最终该元素被选中的概率就等于 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 1.085em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.814em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.085em 1000.003em 2.708em -0.376em); top: -2.162em; left: 0.003em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.544em; height: 0px;"><span style="position: absolute; clip: rect(1.572em 1000.003em 2.384em -0.43em); top: -2.649em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(1.734em 1000.003em 2.384em -0.484em); top: -1.891em; left: 50%; margin-left: -0.214em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.544em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.789em; vertical-align: -0.568em;"></span></span></span></span></span>。</p>
<ol style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;">当 n == k 时，每个元素出现在蓄水池的概率都是1，即 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 1.031em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.085em 1000.003em 2.762em -0.376em); top: -2.162em; left: 0.003em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.49em; height: 0px;"><span style="position: absolute; clip: rect(1.572em 1000.003em 2.384em -0.43em); top: -2.649em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(1.572em 1000.003em 2.384em -0.43em); top: -1.837em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.49em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.861em; vertical-align: -0.639em;"></span></span></span></span></span>；</li>
<li style="line-height: 1.6;"><p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">当 n == k+1 时，第一次考察发生在元素 k+1 处，根据算法，它被放入蓄水池的概率为 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 2.221em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.68em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.085em 1000.003em 2.817em -0.376em); top: -2.162em; left: 0.003em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 1.41em; height: 0px;"><span style="position: absolute; clip: rect(1.572em 1000.003em 2.384em -0.43em); top: -2.649em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 2.492em -0.43em); top: -1.891em; left: 50%; margin-left: -0.647em;"><span><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">+</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">1</span></span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 1.41em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.932em; vertical-align: -0.711em;"></span></span></span></span></span>；对原蓄水池中的任一元素，该次考察后被换出去的概率等于：</p>
<div style="margin: 20px 0; text-align: center;"><span></span><span style=""><div style="white-space: nowrap;"><span style="width: 37.503em; display: inline-block;"><span style="display: inline-block; position: relative; width: 28.412em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(-1.296em 1000.003em 5.143em -0.376em); top: -2.162em; left: 0.003em;"><span><span style="padding-right: 0.165em; padding-left: 0.165em;"><span style="display: inline-block; position: relative; width: 28.033em; height: 0px;"><span style="position: absolute; clip: rect(2.871em 1000.003em 8.552em -0.538em); top: -6.328em; left: 0.003em;"><span style="display: inline-block; position: relative; width: 4.278em; height: 0px;"><span style="position: absolute; clip: rect(1.68em 1000.003em 3.087em -0.538em); top: -5.138em; right: 0.003em;"><span><span><span style="font-family:MathJax_Math, serif; font-style: italic;">p</span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">被</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">换</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">出</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">去</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: -4.489em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: -1.945em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span></span><span style="display: inline-block; width: 0px; height: 6.334em;"></span></span><span style="position: absolute; clip: rect(2.817em 1000.003em 8.011em -0.43em); top: -5.841em; left: 5.252em;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px;"><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -5.138em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -3.136em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -0.593em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.847em;"></span></span><span style="position: absolute; clip: rect(3.628em 1000.003em 10.068em -0.538em); top: -7.086em; left: 7.037em;"><span style="display: inline-block; position: relative; width: 20.998em; height: 0px;"><span style="position: absolute; clip: rect(1.68em 1000.003em 3.087em -0.538em); top: -5.138em; left: 0.003em;"><span><span><span style="font-family:MathJax_Math, serif; font-style: italic;">p</span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">第</span></span></span></span><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">1</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">个</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">元</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">素</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">被</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">放</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">入</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">蓄</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">水</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">池</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="font-family:MathJax_Math, serif; font-style: italic; padding-left: 0.219em;">p</span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">选</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">中</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">自</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">己</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">作</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">为</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">交</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">换</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">对</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">象</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.139em 1000.003em 3.574em -0.376em); top: -3.136em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 2.275em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.654em -0.43em); top: -3.19em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(1.788em 1000.003em 2.925em -0.43em); top: -1.945em; left: 50%; margin-left: -1.08em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 2.275em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 2.654em -0.43em); top: -1.783em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.492em 1000.003em 4.927em -0.376em); top: -1.945em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 2.275em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.788em 1000.003em 2.925em -0.43em); top: -1.945em; left: 50%; margin-left: -1.08em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 2.275em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.091em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 8.218em; vertical-align: -3.782em;"></span></span></div></span></div>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;"> 所以，元素依然在蓄水池内的概率为 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 17.86em; display: inline-block;"><span style="display: inline-block; position: relative; width: 13.531em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.572em 1000.003em 3.304em -0.376em); top: -2.649em; left: 0.003em;"><span><span style="font-family:MathJax_Main, serif;">1</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">−</span><span style="font-family:MathJax_Math, serif; font-style: italic; padding-left: 0.219em;">p</span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">被</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">换</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">出</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">去</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.273em;">=</span><span style="font-family:MathJax_Main, serif; padding-left: 0.273em;">1</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">−</span><span style="padding-left: 0.327em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 1.41em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.438em -0.43em); top: -2.703em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 2.492em -0.43em); top: -1.891em; left: 50%; margin-left: -0.647em;"><span><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">+</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">1</span></span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 1.41em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.273em;">=</span><span style="padding-left: 0.381em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 1.41em; height: 0px;"><span style="position: absolute; clip: rect(1.572em 1000.003em 2.384em -0.43em); top: -2.649em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 2.492em -0.43em); top: -1.891em; left: 50%; margin-left: -0.647em;"><span><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">+</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">1</span></span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 1.41em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.932em; vertical-align: -0.711em;"></span></span></span></span></span>。</p>
</li>
<li style="line-height: 1.6;"><p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">当 n == k+2 时，根据2，前 k+1 内的元素在第二次考察（即考察第 k+2 个元素）前在蓄水池内的概率为 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 2.221em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.68em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.085em 1000.003em 2.817em -0.376em); top: -2.162em; left: 0.003em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 1.41em; height: 0px;"><span style="position: absolute; clip: rect(1.572em 1000.003em 2.384em -0.43em); top: -2.649em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 2.492em -0.43em); top: -1.891em; left: 50%; margin-left: -0.647em;"><span><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">+</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">1</span></span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 1.41em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.932em; vertical-align: -0.711em;"></span></span></span></span></span>。</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;"> 同样的，第 k+2 个元素被放入蓄水池的概率为 <span style="display:inline-block;margin:0"><span></span><span style=""><span style="white-space: nowrap;"><span style="width: 2.221em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.68em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(1.085em 1000.003em 2.817em -0.376em); top: -2.162em; left: 0.003em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 1.41em; height: 0px;"><span style="position: absolute; clip: rect(1.572em 1000.003em 2.384em -0.43em); top: -2.649em; left: 50%; margin-left: -0.16em;"><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.221em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 2.492em -0.43em); top: -1.891em; left: 50%; margin-left: -0.647em;"><span><span style="font-size: 70.7%; font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">+</span><span style="font-size: 70.7%; font-family:MathJax_Main, serif;">2</span></span><span style="display: inline-block; width: 0px; height: 2.275em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 1.41em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.932em; vertical-align: -0.711em;"></span></span></span></span></span>；</p>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;"> 对前 k+1 的元素，在第二次考察后在蓄水池要求 1)之前就在蓄水池；2)这次没有被交换出去：</p>
<div style="margin: 20px 0; text-align: center;"><span></span><span style=""><div style="white-space: nowrap;"><span style="width: 35.933em; display: inline-block;"><span style="display: inline-block; position: relative; width: 27.221em; height: 0px; font-size: 132%;"><span style="position: absolute; clip: rect(-3.298em 1000.003em 7.146em -0.376em); top: -2.162em; left: 0.003em;"><span><span style="padding-right: 0.165em; padding-left: 0.165em;"><span style="display: inline-block; position: relative; width: 26.843em; height: 0px;"><span style="position: absolute; clip: rect(4.873em 1000.003em 14.559em -0.538em); top: -10.333em; left: 0.003em;"><span style="display: inline-block; position: relative; width: 5.035em; height: 0px;"><span style="position: absolute; clip: rect(1.68em 1000.003em 3.087em -0.538em); top: -7.14em; right: 0.003em;"><span><span><span style="font-family:MathJax_Math, serif; font-style: italic;">p</span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">在</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">蓄</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">水</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">池</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">中</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: -7.086em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: -5.03em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: -2.486em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span><span style="position: absolute; clip: rect(3.845em 1000.003em 4.169em -0.484em); top: 0.057em; right: 0.003em;"><span><span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span></span><span style="display: inline-block; width: 0px; height: 10.338em;"></span></span><span style="position: absolute; clip: rect(4.873em 1000.003em 14.072em -0.43em); top: -9.9em; left: 6.009em;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px;"><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -7.14em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -5.733em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -3.677em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: -1.134em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.113em 1000.003em 2.762em -0.43em); top: 1.41em; left: 50%; margin-left: -0.376em;"><span><span><span style="font-family:MathJax_Main, serif;">=</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span></span><span style="display: inline-block; width: 0px; height: 9.905em;"></span></span><span style="position: absolute; clip: rect(5.63em 1000.003em 16.074em -0.538em); top: -11.09em; left: 7.795em;"><span style="display: inline-block; position: relative; width: 19.05em; height: 0px;"><span style="position: absolute; clip: rect(1.68em 1000.003em 3.087em -0.538em); top: -7.14em; left: 0.003em;"><span><span><span style="font-family:MathJax_Math, serif; font-style: italic;">p</span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">之</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">前</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">在</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">池</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">中</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="font-family:MathJax_Math, serif; font-style: italic; padding-left: 0.219em;">p</span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">未</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">被</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">换</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">出</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.68em 1000.003em 3.087em -0.538em); top: -5.733em; left: 0.003em;"><span><span><span style="font-family:MathJax_Math, serif; font-style: italic;">p</span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">之</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">前</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">在</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">池</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">中</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">(</span><span style="font-family:MathJax_Main, serif;">1</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">−</span><span style="font-family:MathJax_Math, serif; font-style: italic; padding-left: 0.219em;">p</span><span style="font-family:MathJax_Main, serif;">(</span><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">2</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">放</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">入</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">池</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="font-family:MathJax_Math, serif; font-style: italic; padding-left: 0.219em;">p</span><span style="font-family:MathJax_Main, serif;">(</span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">被</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">选</span></span></span></span><span><span><span><span style="font-family:STIXGeneral, 'Arial Unicode MS', serif, serif; font-size: 76%; font-style: normal; font-weight: normal;">中</span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span><span style="font-family:MathJax_Main, serif;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.139em 1000.003em 3.574em -0.376em); top: -3.677em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 2.275em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.654em -0.43em); top: -3.19em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(1.788em 1000.003em 2.925em -0.43em); top: -1.945em; left: 50%; margin-left: -1.08em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 2.275em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">(</span><span style="font-family:MathJax_Main, serif;">1</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">−</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 2.275em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.654em -0.43em); top: -3.19em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(1.788em 1000.003em 2.925em -0.43em); top: -1.945em; left: 50%; margin-left: -1.08em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">2</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 2.275em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">×</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(1.843em 1000.003em 2.817em -0.376em); top: -3.352em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Main, serif;">1</span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.626em 1000.003em 2.654em -0.43em); top: -1.783em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 0.598em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif;">)</span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.139em 1000.003em 3.574em -0.376em); top: -1.134em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 2.275em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.654em -0.43em); top: -3.19em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(1.788em 1000.003em 2.925em -0.43em); top: -1.945em; left: 50%; margin-left: -1.08em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 2.275em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="padding-left: 0.219em;"><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 2.275em; height: 0px;"><span style="position: absolute; clip: rect(1.788em 1000.003em 2.925em -0.43em); top: -3.352em; left: 50%; margin-left: -1.08em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(1.788em 1000.003em 2.925em -0.43em); top: -1.945em; left: 50%; margin-left: -1.08em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">2</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 2.275em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(2.492em 1000.003em 4.927em -0.376em); top: 0.057em; left: 0.003em;"><span><span><span><span><span style="padding-left: 0.111em; padding-right: 0.111em;"><span style="display: inline-block; position: relative; width: 2.275em; height: 0px;"><span style="position: absolute; clip: rect(1.626em 1000.003em 2.654em -0.43em); top: -3.19em; left: 50%; margin-left: -0.214em;"><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 2.492em;"></span></span><span style="position: absolute; clip: rect(1.788em 1000.003em 2.925em -0.43em); top: -1.945em; left: 50%; margin-left: -1.08em;"><span><span style="font-family:MathJax_Math, serif; font-style: italic;">k</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">+</span><span style="font-family:MathJax_Main, serif; padding-left: 0.219em;">2</span></span><span style="display: inline-block; width: 0px; height: 2.654em;"></span></span><span style="position: absolute; clip: rect(0.869em 1000.003em 1.247em -0.484em); top: -1.296em; left: 0.003em;"><span style="border-left-width: 2.275em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.007em;"></span></span></span><span style="display: inline-block; width: 0px; height: 11.096em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.167em;"></span></span></span><span style="border-left-width: 0.004em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 13.504em; vertical-align: -6.425em;"></span></span></div></span></div>
<p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;"> 也符合条件。</p>
</li>
<li style="line-height: 1.6;"><p style="margin: 0 0 10px; line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">推广上述过程即可得证。</p>
</li>
</ol>
<h2 style="font-family: inherit; font-weight: bold; line-height: 1.1; color: inherit; margin-top: 30px; margin-bottom: 20px; font-size: 30px;">4. 参考</h2>
<ol style="margin-top: 0; margin-bottom: 10px; line-height: 1.6;">
<li style="line-height: 1.6;"><a href="http://bost.ocks.org/mike/shuffle/" style="background: transparent;" target="_blank">Fisher–Yates Shuffle</a></li>
<li style="line-height: 1.6;"><a href="http://www.gocalf.com/blog/build-rand3-from-rand5.html" style="background: transparent;" target="_blank">利用等概率Rand5产生等概率Rand3</a></li>
<li style="line-height: 1.6;"><a href="http://blog.csdn.net/hackbuteer1/article/details/7971328" style="background: transparent;" target="_blank">海量数据随机抽样问题（蓄水池问题）</a></li>
</ol>
</div>
</article> <!-- end #post__content -->

<div id="post__share">
  <a id="icon-twitter" class="fontello" href="https://twitter.com/intent/tweet?url=http://novoland.github.io/%E7%AE%97%E6%B3%95/2014/08/05/%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E7%9A%84%E6%A6%82%E7%8E%87%E9%97%AE%E9%A2%98.html&text=几个常见的概率问题" target="_blank"></a>
  <a id="icon-cc" class="fontello" href="http://creativecommons.org/licenses/by-nc-sa/3.0" target="_blank"></a>
  <a id="icon-weibo" class="fontello" href="http://v.t.sina.com.cn/share/share.php?url=http://novoland.github.io/%E7%AE%97%E6%B3%95/2014/08/05/%E5%87%A0%E4%B8%AA%E5%B8%B8%E8%A7%81%E7%9A%84%E6%A6%82%E7%8E%87%E9%97%AE%E9%A2%98.html&title=几个常见的概率问题" target="_blank"></a>
</div> <!-- end #post__share -->

<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink" target="_blank">Loading Disqus comments...</a>
</div> <!-- end #disqus_thread -->

<p id="copyright">Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>&nbsp;&nbsp;|&nbsp;&nbsp;Theme <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll</a></p>
      </div> <!-- end #pjax -->
<!-- 
      <div id="post__toc-trigger">
        <div id="post__toc">
          <span id="post__toc-title">目录</span>
          <ul id="post__toc-ul"></ul>
        </div>
      </div> -->
    </div> <!-- end #post -->

    <button id="js-fullscreen"><span id="icon-arrow" class="fontello"></span></button>
    <button id="js-toc"><span id="icon-list" class="fa fa-list-ul"></span></button>
    <div id="post__toc">
      <span id="post__toc-title">目录</span>
      <ul id="post__toc-ul"></ul>
    </div>

    <script src="/assets/js/jquery-2.0.3.min.js"></script>
    <script src="/assets/js/jquery.pjax.js"></script>
    <script src="/assets/js/nprogress.js"></script>
    <script src="/assets/js/script.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  </body>
</html>
