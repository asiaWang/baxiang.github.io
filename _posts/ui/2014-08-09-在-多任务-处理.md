---
layout: post
title: 多任务处理
tags: ui
category: ui
---

多任务处理允许用户在最近使用过的 app 之间快速切换。


<table align="center">
<tr>
	<td>
	<img src="https://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/Art/multitasking_2x.png"/>
	</td>
</tr>
</table>

为了提供这样的体验,在用户从一个程序中切换离开时,多任务处理会让其在后台进入暂停状态。当用户切换回来 时,由于无需重新加载界面,因此 app 能够快速恢复。人们会用多任务处理界面(如下所示)来选择最近使用的 app 。

	API 备注:如需了解如何在代码中实现多任务处理,请参阅「App States and Multitasking」。
	
纷繁的多任务环境能让设备上的其他应用实现和谐相处。从一个很高的层面来说,这意味这所有的 app 应当:
	
- 优雅地处理从其他应用过来时的中断和音效
-  快速、平滑地停止和重启(即进入和退出后台)
- 负责任地处理后台行为

以下这些特定的准则会有助于在多任务环境中成功运行你的 app。

1.做好随时中断和恢复的准备。多任务处理增加了后台程序打断你的 app 的可能。其他的特性,例如广告和快捷切换 的存在,可能会导致更频繁的打断。越快越准确地保存你程序当前的状态,用户就能更快地从他们中断的地方重启。 为了给用户一个无缝的重启体验,使用 UIKit 的状态保存和功能恢复(如需了解更多,请参阅「State Preservation and Restoration」)。

2.确保你的界面能支持双倍高度的状态栏。双倍高度状态栏会在正在进行的通话、录音和放在底座上时出现。没有处理 这个双倍栏高的应用可能会导致布局错乱。例如,界面可以被压缩或者被盖住。由于在多任务环境中要处理好双栏高 度的状态栏,这尤为重要,因为越来越多的 app 会导致其出现。

3.做好随时停止那些需要用户关注或参与的进程的准备。例如,如果你的应用是一个游戏或者多媒体程序,确保用户从 你的程序切换离开时不会遗漏任何内容或事件。当用户切换回来时,他们想像从未离开过一样继续体验。

4.确保恰当地处理程序声音。多任务处理使得在你的程序运行时很有可能同时运行着其他程序。这也使得你的程序声音 要能暂停和恢复以应对随时可能发生的中断。关于帮助你确保程序声音符合用户预期并和设备上的其他声音和谐共处 的指南,查看「声音」(第 107 页)。5.恰当地使用本地通知。无论 app 在后台暂停、运行还是根本没有运行,程序都要能在特定时间发送本地通知。为了 获得最佳用户体验,避免给用户呈现过多通知,并遵循在「通知中心」(第 96 页)中创建通知内容的准则。

6.适时地在后台完成用户发起的任务。在用户触发一个任务后,他们常常希望即便在离开你的程序后,程序也保持运行 直至完成任务。如果你的 app 执行一个用户任务到一半,不需要用户做出额外操作,你也应当在后台将其暂停前完 成它。