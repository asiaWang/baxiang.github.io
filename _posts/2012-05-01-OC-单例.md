---
layout: post
title: <h1>OC中的单例</h1>
tags: object-c
category: object-c
---
1. 什么是单例？

（1） 单例的意思就是只有一个实例。单例模式确保某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例，这个类就称之为单例类。

（2） 单例模式的特点：
	
- 一个类只能有向整个系统提供这个实例
- 自行创建这个实例
- 自行向系统提供这个实例
 
 （3）单例模式的优点：
 		
 - 实现控制：Singleton会组织其他对象实例化自己的对象，确保所有对象都访问唯一实例。
 
 - 灵活性： 因为类控制了实例化过程，所以类可以干呢更加灵活修改实例化过程		
		
（4）创建单例的基本步骤

- 声明一个单件对象的静态实例，并初始化为nil
- 创建一个类的类工厂方法，生成一个该类的实例，当且仅当这个类的实例为nil时
- 覆盖allocWithZone:方法，确保用户在直接分配和初始化对象时，不会产生另一个对象
- 实现NScopying协议，覆盖release,autorelease,retain,ratainCount方法
- 在多线程的环境中，注意使用@synchronized关键字，确保静态实例被正确的创建和初始化。		

###下面我们以例子sigtonDemo来说明,我们一个UserContext类，这个类包含.h和.m文件
1.UserContext.h文件
{% highlight objc linenos %}

 #import  "UserContext.h"
 
 static UserContext *segtonInstance = nil; //声明一个静态实例，并且初始化为nil
 
 @implementation UserContext
 
 +(id)shareUserContext {
 	   if(segtonInstance == nil){	   
 	   	segtonInstance = [[[self class]alloc]init];
  }
 	return segtonInstance;
 }
 

{% endhighlight %}